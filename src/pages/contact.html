<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Contact â€“Â KJ's Camping</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="../styles/contact.css">
  <link rel="stylesheet" href="../styles/main.css">
</head>
<body>
  <div id="site-header"></div>

  <main class="container contact-page">
    <h1 id="contact-title">Get in Touch</h1>
    <p id="contact-desc">Select a category so we can route your message to the right crew ðŸ”ŽÂ â›º.</p>

    <!-- Replace YOUR_FORM_ID with your actual Formspree endpoint -->
    <form id="contact-form"
          action="https://formspree.io/f/YOUR_FORM_ID"
          method="POST">

      <!-- CATEGORY (helps inbox sorting) -->
      <div class="field">
        <label for="category" id="label-category">Category<span>*</span></label>
        <select id="category" name="Category" required>
          <option value="" id="opt-none">â€”Â Choose oneÂ â€”</option>
          <option id="opt-reservations">Reservations</option>
          <option id="opt-groups">Groups &amp; Events</option>
          <option id="opt-activities">Activities</option>
          <option id="opt-facilities">Facilities &amp; Maintenance</option>
          <option id="opt-feedback">Feedback &amp; Suggestions</option>
          <option id="opt-other">Other</option>
        </select>
      </div>

      <!-- NAME -->
      <div class="field">
        <label for="name" id="label-name">Your Name<span>*</span></label>
        <input type="text" id="name" name="Name" required>
      </div>

      <!-- EMAIL -->
      <div class="field">
        <label for="email" id="label-email">Email<span>*</span></label>
        <input type="email" id="email" name="_replyto" required>
      </div>

      <!-- MESSAGE -->
      <div class="field">
        <label for="message" id="label-message">Message<span>*</span></label>
        <textarea id="message" name="Message" rows="6" required></textarea>
      </div>

      <!-- Hidden subject updated in JS so the chosen category appears in the email subject line -->
      <input type="hidden" name="_subject" value="KJ's Camping Contact">

      <button type="submit" class="btn" id="btn-submit">Send Message</button>
    </form>
  </main>

  <!-- Dynamically prefix email subject with category for easy filtering -->
  <script>
    const form      = document.getElementById('contact-form');
    const category  = document.getElementById('category');
    const subjectHF = form.querySelector('input[name="_subject"]');

    category.addEventListener('change', () => {
      if (category.value) {
        subjectHF.value = "[" + category.value + "] KJ's Camping Contact";
      } else {
        subjectHF.value = "KJ's Camping Contact";
      }
    });
  </script>

  <div id="site-footer"></div>

  <script>
    /* --- Internationalisation (EN default; IT & NL support) --- */
    const translations = {
      it: {
        'contact-title':  'Contattaci',
        'contact-desc':   'Seleziona una categoria cosÃ¬ possiamo instradare il tuo messaggio al team giusto ðŸ”Ž â›º.',
        'label-category': 'Categoria',
        'opt-none':       'â€” Scegli â€”',
        'opt-reservations': 'Prenotazioni',
        'opt-groups':       'Gruppi & Eventi',
        'opt-activities':   'AttivitÃ ',
        'opt-facilities':   'Strutture & Manutenzione',
        'opt-feedback':     'Feedback & Suggerimenti',
        'opt-other':        'Altro',
        'label-name':     'Il tuo nome',
        'label-email':    'Email',
        'label-message':  'Messaggio',
        'btn-submit':     'Invia'
      },
      nl: {
        'contact-title':  'Neem contact op',
        'contact-desc':   'Selecteer een categorie zodat we je bericht bij het juiste team krijgen ðŸ”Ž â›º.',
        'label-category': 'Categorie',
        'opt-none':       'â€” Kies â€”',
        'opt-reservations': 'Reserveringen',
        'opt-groups':       'Groepen & Evenementen',
        'opt-activities':   'Activiteiten',
        'opt-facilities':   'Faciliteiten & Onderhoud',
        'opt-feedback':     'Feedback & Suggesties',
        'opt-other':        'Overig',
        'label-name':     'Je naam',
        'label-email':    'Eâ€‘mail',
        'label-message':  'Bericht',
        'btn-submit':     'Verzenden'
      }
    };

    function applyTranslations() {
      const params = new URLSearchParams(window.location.search);
      const stored  = localStorage.getItem('site-lang');
      const browser = (navigator.language || '').slice(0, 2).toLowerCase();
      const lang = (params.get('lang') || stored || browser || 'en').slice(0, 2);
      if (!translations[lang]) return; // keep English as fallback
      document.documentElement.lang = lang;

      Object.entries(translations[lang]).forEach(([id, text]) => {
        const el = document.getElementById(id);
        if (el) el.textContent = text;
      });
    }

    /* Header & footer injection + i18n + header.js loader */
    (async () => {
      try {
        const [headerHtml, footerHtml] = await Promise.all([
          fetch('./components/header.html').then(r => r.text()),
          fetch('./components/footer.html').then(r => r.text())
        ]);
        document.getElementById('site-header').innerHTML = headerHtml;
        document.getElementById('site-footer').innerHTML = footerHtml;

        // Load shared header behaviour (language select, nav relinkingâ€¦)
        const headerScript = document.createElement('script');
        headerScript.src = '/scripts/header.js';
        document.body.appendChild(headerScript);

        applyTranslations();
      } catch (err) {
        console.error('Failed loading header/footer:', err);
      }
    })();
  </script>

</body>
</html>