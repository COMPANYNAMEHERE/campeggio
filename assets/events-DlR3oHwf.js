(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))v(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&v(u)}).observe(document,{childList:!0,subtree:!0});function p(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function v(t){if(t.ep)return;t.ep=!0;const a=p(t);fetch(t.href,a)}})();document.addEventListener("DOMContentLoaded",()=>{const f=document.getElementById("calendar");if(!f)return;const o=document.getElementById("event-modal"),p=document.getElementById("modal-title"),v=document.getElementById("modal-date"),t=document.getElementById("modal-desc"),a=document.querySelector(".close-button"),u=window.location.pathname.match(/\/(en|it|nl)(?=\/|$)/),i=u?u[1]:"en",w=[{date:"2025-07-05",titles:{en:"Summer Kickoff BBQ",it:"Grigliata di Inizio Estate",nl:"Zomer BBQ Opening"},descriptions:{en:"Gather for grilled classics, live music and campfire stories.",it:"Una serata con griglia, musica dal vivo e racconti intorno al fuoco.",nl:"Geniet van gegrilde lekkernijen, live muziek en kampvuurverhalen."}},{date:"2025-08-21",titles:{en:"Stargazer's Night",it:"Notte delle Stelle",nl:"Sterrenkijkavond"},descriptions:{en:"Join our astronomy guide for a tour of the Sicilian skies.",it:"Osserviamo il cielo siciliano con la nostra guida astronomica.",nl:"Onze sterrenkundige gids laat je de Siciliaanse hemel ontdekken."}},{date:"2025-10-12",titles:{en:"Fall Harvest Festival",it:"Festa del Raccolto",nl:"Oogstfeest"},descriptions:{en:"Celebrate the olive and grape harvest with local food and craft stalls.",it:"Festeggiamo olive e uva con cibo locale e bancarelle artigiane.",nl:"Vier de olijf- en druivenoogst met lokaal eten en kraampjes."}}],D=document.getElementById("events-list");let c=new Date;c.setDate(1);const d=new Date;function S(s){if(!o)return;const r=new Date(s.date);p.textContent=s.title,v.textContent=r.toLocaleDateString(i,{day:"numeric",month:"long",year:"numeric"}),t.textContent=s.desc,o.classList.remove("hidden")}a&&a.addEventListener("click",()=>o.classList.add("hidden")),o&&o.addEventListener("click",s=>{s.target===o&&o.classList.add("hidden")});function E(){const s=c.getFullYear(),r=c.getMonth(),e=new Date(s,r,1),h=new Date(s,r+1,0).getDate(),L=(e.getDay()+6)%7;let l='<div class="calendar-header">';l+='<button class="nav-button" id="prev-month">‹</button>',l+=`<div class="month-year">${e.toLocaleDateString(i,{month:"long",year:"numeric"})}</div>`,l+='<button class="nav-button" id="next-month">›</button>',l+="</div>",l+='<div class="calendar-grid">';for(let n=0;n<7;n++){const g=new Date(2021,0,4+n);l+=`<div class="day-name">${g.toLocaleDateString(i,{weekday:"short"})}</div>`}for(let n=0;n<L;n++)l+='<div class="day-cell"></div>';let y=1;for(;y<=h;){const n=new Date(s,r,y);let g="day-cell";n<new Date(d.getFullYear(),d.getMonth(),d.getDate())&&(g+=" past-day"),n.getFullYear()===d.getFullYear()&&n.getMonth()===d.getMonth()&&n.getDate()===d.getDate()&&(g+=" today");const k=n.toISOString().slice(0,10),b=w.filter(m=>m.date===k);let M=`<span class="date-number">${y}</span>`;b.forEach(m=>{M+=`<div class="event" data-date="${m.date}" data-title="${m.titles[i]}" data-desc="${m.descriptions[i]}">${m.titles[i]}</div>`}),l+=`<div class="${g}">${M}</div>`,y++}l+="</div>",f.innerHTML=l,f.querySelectorAll(".event").forEach(n=>{n.addEventListener("click",()=>{S({date:n.dataset.date,title:n.dataset.title,desc:n.dataset.desc})})}),document.getElementById("prev-month").addEventListener("click",()=>{c.setMonth(c.getMonth()-1),E()}),document.getElementById("next-month").addEventListener("click",()=>{c.setMonth(c.getMonth()+1),E()})}function $(){if(!D)return;const s=w.filter(e=>new Date(e.date)>=new Date(d.getFullYear(),d.getMonth(),d.getDate())).sort((e,h)=>new Date(e.date)-new Date(h.date));let r="";s.forEach(e=>{const L=new Date(e.date).toLocaleDateString(i,{day:"numeric",month:"long",year:"numeric"});r+=`<article class="event-item" data-date="${e.date}" data-title="${e.titles[i]}" data-desc="${e.descriptions[i]}"><h2>${L} – ${e.titles[i]}</h2><p>${e.descriptions[i]}</p></article>`}),D.innerHTML=r,D.querySelectorAll(".event-item").forEach(e=>{e.addEventListener("click",()=>{S({date:e.dataset.date,title:e.dataset.title,desc:e.dataset.desc})})})}E(),$()});
